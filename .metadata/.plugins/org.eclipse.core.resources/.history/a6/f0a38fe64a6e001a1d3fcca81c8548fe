package programmers2;

//[2020 카카오공채] 외벽 점검
import java.util.*;

public class problem_15 {
	static int answer =-1;
	
	public static void main(String[] args) {
		int n = 12;
		int[] weak = {1,5,6,10};
		int[] dist= {1,2,3,4};
		
		int result = solution(n,weak,dist);
		System.out.println(result);
	}
	
	public static int solution(int n, int[] weak, int[] dist) {
		boolean [] visited = new boolean[n];
		
		for(int i =1 ; i < 1<<dist.length ; i++) {
			int memberCount = Integer.bitCount(i);
			simulation(0,memberCount,n,i,dist,weak,0,visited);
        }
        
        
        return answer;
    }
	
	private static void simulation(int depth, int k, int n, int member, int[] dist, int [] weak, int cp, boolean[] visited) {
		if(depth == k) {
			if(isComplete(visited,weak)) {
				if(answer ==- 1)
					answer = depth;
				else
					answer = Math.min(answer, depth);
			}
			
			return;
		}
		
		boolean [] tv = new boolean[n];
		System.arraycopy(visited, 0, tv, 0, n);
		
		for(int i =0 ; i < dist.length ; i++) {
			if((member & 1<<i) == 1<<i) {
				int curDist = dist[i];
				
				for(int j =cp ; j < cp+curDist ; j++) {
					if(!visited[j]) {
						int tmp = Math.floorMod(j, n);
						visited[tmp] = true;
					}
				}
				member &= ~(1<<i);
				simulation(depth+1,k,n,member ,dist,weak,curDist+cp,visited);
				member |= (1<<i);
				
				System.arraycopy(tv, 0, visited, 0, n);
			}
		}
	}
	
	
	private static boolean isComplete(boolean [] visited, int [] weak) {
		for(int i =0 ; i < weak.length ; i++) {
			if(!visited[weak[i]-1])
				return false;
		}
		
		return true;
	}
}
