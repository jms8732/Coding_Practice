package programmers2;

//[3차] 방금 그곡
import java.util.*;

public class problem_13 {
	public static void main(String[] args) {
		String m = "ABC";
		String[] infos = { "12:00,12:14,HELLO,C#DEFGAB", "13:00,13:05,WORLD,ABCDEF" };

		String result = solution(m, infos);
		System.out.println(result);
	}

	public static String solution(String m, String[] musicinfos) {

		m = makeString(m);
		int MAX =0;
		String answer = "";
		for (int i = 0; i < musicinfos.length; i++) {
			String cur = musicinfos[i];
			String[] split = cur.split(",");

			String startTime = split[0];
			String endTime = split[1];

			int tm = calculate(startTime, endTime);

			String title = split[2];
			String melody = split[3];

			// 시간이 길이보다 큰 경우
			StringBuilder sb = new StringBuilder();
			melody = makeString(melody);
			int div = tm / melody.length();
			int mol = tm % melody.length();

			for (int j = 0; j < div; j++) {
				sb.append(melody);
			}

			sb.append(melody.substring(0, mol));

			if (sb.toString().contains(m)) {
				if (MAX < tm) {
					MAX = tm;
					answer = title;
				}
			}
		}

		if (answer.equals(""))
			return "(None)";
		else
			return answer;
	}

	private static String makeString(String pattern) {
		pattern = pattern.replaceAll("A#", "a");
		pattern = pattern.replaceAll("C#", "c");
		pattern = pattern.replaceAll("D#", "d");
		pattern = pattern.replaceAll("F#", "f");
		pattern = pattern.replaceAll("G#", "g");

		return pattern;
	}


	private static int calculate(String st, String et) {
		int sHour = Integer.parseInt(st.substring(0, 2));
		int sMin = Integer.parseInt(st.substring(3, 5));

		int eHour = Integer.parseInt(et.substring(0, 2));
		int eMin = Integer.parseInt(et.substring(3, 5));

		int result = Math.abs(sHour - eHour) * 60 + Math.abs(sMin - eMin);
		return result;
	}

}
