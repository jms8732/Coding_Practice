package programmers1;

//베스트 엘범
import java.util.*;

public class problem_6 {
	public static void main(String[] args) {
		String tmp [] = {"classic","pop","classic","classic","pop"};
		int t[] = {500,600,150,800,2500};
		int [] result = solution(tmp,t);
		for(int i : result)
			System.out.print(i + " ");
	}

	public static int[] solution(String[] genres, int[] plays) {
		Map<String,Integer> map = new HashMap<>(); //장르와 누적 재생 횟수 저장
		
		for(int i =0 ; i< genres.length ; i++) {
			String genre = genres[i]; //장르
			int play=  plays[i]; //플레이 횟수
			
			if(map.get(genre) == null) {
				//처음 등록이라면
				map.put(genre, play);
			}else
			{
				int tmp = map.get(genre);
				map.put(genre, tmp+play); //갱신
			}
		}
		
		List<Node> list = new LinkedList<>();
		
		for(int i =0 ; i< genres.length ; i++) {
			String genre = genres[i];
			int play = plays[i];
			list.add(new Node(play,i,map.get(genre)));
		}
		list.sort(new Comparator<Node>() {

			@Override
			public int compare(Node o1, Node o2) {
				// TODO Auto-generated method stub
				if(o1.genre < o2.genre) //속한 노래가 많이 재생된 장르를 먼저 수록
					return 1;
				else if(o1.genre == o2.genre) {
					//장르 횟수가 같다면
					if(o1.play < o2.play) {
						//장르 내에서 많이 재생된 노래를 먼저 수록
						return 1;
					}else if(o1.play == o2.play)
					{
						if(o1.idx < o2.idx) //3.장르 내에서 재생 횟수가 같으 노래 중에서는 고유 번호가 낮은 노래 먼저 수록
							return -1;
						else
							return 1;
					}
					else
						return -1;
				}
				else
					return -1;
			}
			
		});
		
		//장르 별로 가장 많이 재생된 노래를 두 개씩 모음
		int [] tmp = new int[map.size() *2];
		int count = 0; //누적 횟수
		int idx = 0;
		int genre = list.get(0).genre;
		for(int i =0 ; i< list.size() ; i++) {
			if(count == 2 && genre == list.get(i).genre) {
				count = 0;
				continue;
			}
			genre = list.get(i).genre;
			tmp[idx++] = list.get(i).idx; //삽입
			count++;
		}
		
		return tmp;
	}
	
	private static class Node{
		int play; //플레이 횟수
		int idx; //고유번호
		int genre; //장르 누적 수
		public Node(int p ,int i ,int g) {
			this.play = p;
			this.idx = i;
			this.genre = g;
		}
	}
}
